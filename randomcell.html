<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
<link href="css/materialize.min.css" rel="stylesheet" type="text/css" />
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script src="js/materialize.min.js" type="text/javascript"></script>

</head>

<body  onload="tableMatrix(1);getRandomColor();timer();" >

<div class="top">

</div>

<form name="myForm" method="post" style="display:none;">
        <label>Row & Columns Number</label>
        <br/>
        <input type="number" name="board" placeholder="Number of rows">
        <br/><br/>
        <label>Number of selected cells</label>
        <br/>
        <input type="number" name="myNumb" value="1" placeholder="Number of selected cells">
        <br/><br/>
        <input type="button" value="submit">
		
</form>
<h6 class="scoreDiv col s6 left">Score: <span id="score"></span></h6>    
<h6 style="display:block;" class="col s6 white-text"><span id="time" class="right">00:59</span></h6>
<div id="myContainer" ></div>

<div class="timer" id="timer" style="display:none">
    <ul class="flip minutePlay">
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">0</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">0</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">1</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">1</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">2</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">2</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">3</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">3</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">4</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">4</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">5</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">5</div>
                </div>
            </a>
        </li>
    </ul>
    <ul class="flip secondPlay">
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">0</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">0</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">1</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">1</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">2</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">2</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">3</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">3</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">4</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">4</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">5</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">5</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">6</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">6</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">7</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">7</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">8</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">8</div>
                </div>
            </a>
        </li>
        <li>
            <a href="#">
                <div class="up">
                    <div class="shadow"></div>
                    <div class="inn">9</div>
                </div>
                <div class="down">
                    <div class="shadow"></div>
                    <div class="inn">9</div>
                </div>
            </a>
        </li>
    </ul>
</div>

 
 <div class="finish fade" id="finish" align="center" style="display:none">
    <div class="fade center-align">
        <h6 class="white-text">Thank You for Your Presence</h6>
        
    </div>
    <big class="fade">SCORE</big>
    <div id="el" class="fade" align="center"></div>
    <div class="clearfix"></div>
    <img src="images/photo3.png" class="fade" id="image"/>
    <div class="clearfix"></div>
        <a class="waves-effect waves-light white-text fade" href="index.html" > Go Back to Start Again</a>

 </div>
 <div class="row center-align developer">
 <span class="">Naresh Kumar</span>
 </div>

<script>
    var tableCount, countcells = 2, score = 0, timeInterval, reduceColorValue = 100;

    function timer() {
        $(".finish").hide();
        var fiveMinutes = 59 * 1,
     display = document.querySelector('#time');
        startTimer(fiveMinutes, display);

        
    }
    // Auto CountDown Timer
    function startTimer(duration, display) {
        var timer = duration, minutes, seconds;
        timeInterval = setInterval(function () {
            minutes = parseInt(timer / 60, 10)
            seconds = parseInt(timer % 60, 10);

            minutes = minutes < 10 ? "0" + minutes : minutes;
            seconds = seconds < 10 ? "0" + seconds : seconds;

            display.textContent = minutes + ":" + seconds;
            
            if (--timer < 0) {
                //timer = duration;
                finish();
            }
        }, 1000);
    }

    function finish() {
        window.clearInterval(timeInterval);
        document.getElementById("timer").style.display = "none";
        document.getElementById("table").style.display = "none";
        document.getElementById("finish").style.display = "block";
        //document.getElementById("scorecard").innerHTML = score;
        $(".finish").show();
        $(".scoreDiv").hide();
        $("body").addClass("brown darken-4");
        $("#time").hide();
        //increment();
        timeSlice();
    }
    var i = 1;
    var time = 1000;
    function timeSlice() {
        (function ($) {
            (function fadeNext(collection) {
                collection.eq(0).fadeIn(time, function () {
                    (collection = collection.slice(1)).length
                && fadeNext(collection)
                    i += 1;
                    if (i == 3) {
                        increment();
                        time = 6000;
                        $('#el').addClass("reduceScoreFont");
                    }
                    else if (i == 4) {
                        $("#image").addClass("increaseImageSize");
                        time = 2000;
                    }
                });
            })($('.fade'))
        })(jQuery)
    }

    // Animate the element's value from x to y:
    function increment() {
        $({ someValue: 0 }).animate({ someValue: score }, {
            duration: 9000,
            easing: 'swing', // can be anything
            step: function () { // called on every step
                // Update the element's text with rounded-up value:
                $('#el').text(commaSeparateNumber(Math.round(this.someValue)));
            }
        });
        

        if (score <= 30) {
            $("#image").attr('src', 'medal1.png');

        }
        else if ((score > 30) && (score <= 40)) {
            $("#image").attr('src', 'medal3.png');
        }
        else if (score > 40) {
            $("#image").attr('src', 'medal2.png');
        }

        
    }

    function commaSeparateNumber(val) {
        while (/(\d+)(\d{3})/.test(val.toString())) {
            val = val.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
        }
        return val;
    }


    //get Random Colors on page Load
    function getRandomColor() {
        //var letters = '0123456789'.split(''); //ABCDEF
        //var color = '#';
        //for (var i = 0; i < 6; i++) {
        //    color += letters[Math.floor(Math.random() * 10)]; //16
        //}
        var r = Math.floor(Math.random() * 256);
        var g = Math.floor(Math.random() * 256);
        var b = Math.floor(Math.random() * 256);

        var color = 'rgb(' + r + ',' + g + ',' + b + ')';
        //var color = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ')';

        r -= reduceColorValue;
        g -= reduceColorValue;
        b -= reduceColorValue;
        reduceColorValue -= 11;

        var diffColor = 'rgb(' + r + ',' + g + ',' + b + ')';
        $("table tr td").css("background", color);
        $("table tr td a").css("background", diffColor);
        //$("table tr td").css("color", color);
        //alert(color);
        $("#myContainer").addClass("responsive-table");
        //document.getElementsByTagName("table")[0].setAttribute("class", "table");
        document.getElementsByTagName("table")[0].setAttribute("cellspacing", "0");
        document.getElementsByTagName("table")[0].setAttribute("cellpadding", "0");
        document.getElementsByTagName("table")[0].setAttribute("id", "table");

    }
    
    //creating table dynamically
    function createTable(size) {
        var table, tr, td;

        table = document.createElement('table');
        for (var row = 0; row < size; row++) {
            tr = document.createElement('tr');
            for (var col = 0; col < size; col++) {
                td = document.createElement('td');
                td.id = 'cell_' + (row * size + col);
                td.innerHTML = '';
                tr.appendChild(td);
            }
            table.appendChild(tr);
        }
        
        return table;
    }

    //select Random Color Cell
    function selectRandomCells(size, count) {
        var x, numCells, cellId, cell;

        numCells = size * size;
        x = 0;

        while (x < count && x < numCells) {
            cellId = 'cell_' + Math.floor(Math.random() * numCells);
            cell = document.getElementById(cellId);

            if (cell.classList.contains('selected')) {
                // Already selected.
                continue;
            }

            cell.classList.add('selected');

            cell.innerHTML = "<a href='#' onclick='tableMatrixIncrement(2);' style='display:block;padding;100%;text-align:center;background:#000;'></a>";
            //cell.innerHTML = '1';
            x++;

            var deviceWidth = $(window).width();
            var deviceHeight = $(window).height();

            for (var i = 2; i <= 10; i++) {
                if (i == countcells) {
                    if (deviceWidth <= deviceHeight) {
                        $("table td").css("width", 100 / i + "%");
                        $("table td").css("height", $("table td").width());
                        $("table td a").css("width", $("table td").width());
                        $("table td a").css("height", $("table td").width());
                    }
                    else {
                        $("table").css("max-height", "250px");
                        $("table td").css("width", 100 / i + "%");
                        $("table td").css("height", $("table td").height());
                        $("table td a").css("width", $("table td").width());
                        $("table td a").css("height", $("table td").height());
                    }

                }
            }
        }
        
    }

    //Incrementing Table Cells Dynamically
    function tableMatrixIncrement(tableCount) {
        var board, myNumb, myContainer, table;
        score += 1;
        document.getElementById("score").innerHTML = score;

        // Form values.
        //board  = document.forms["myForm"]["board"].value;


        myNumb = document.forms["myForm"]["myNumb"].value;
        
        if (countcells < 10) {
            countcells += 1;
        }
        
        
        
        tableCount = countcells;


        myContainer = document.getElementById('myContainer');
        myContainer.innerHTML = '';

        // Create table.
        table = createTable(tableCount);

        myContainer.appendChild(table);

        selectRandomCells(tableCount, myNumb);
        getRandomColor();
    };

    function tableMatrix(tableCount) {
        var board, myNumb, myContainer, table;

        // Form values.
        //board  = document.forms["myForm"]["board"].value;;
        //myNumb = document.forms["myForm"]["myNumb"].value;
        myNumb = 1;
        tableCount += 1;

        myContainer = document.getElementById('myContainer');
        myContainer.innerHTML = '';

        // Create table.
        table = createTable(tableCount);

        myContainer.appendChild(table);

        selectRandomCells(tableCount, myNumb);
        
        
    };

</script>
<script>
    setInterval(function () {
        secondPlay()
    }, 1000);


    setInterval(function () {
        minutePlay()
    }, 10000);


    function secondPlay() {
        $("body").removeClass("play");
        var aa = $("ul.secondPlay li.active");

        if (aa.html() == undefined) {
            aa = $("ul.secondPlay li").eq(0);
            aa.addClass("before")
            .removeClass("active")
            .next("li")
            .addClass("active")
            .closest("body")
            .addClass("play");

        }
        else if (aa.is(":last-child")) {
            $("ul.secondPlay li").removeClass("before");
            aa.addClass("before").removeClass("active");
            aa = $("ul.secondPlay li").eq(0);
            aa.addClass("active")
            .closest("body")
            .addClass("play");
        }
        else {
            $("ul.secondPlay li").removeClass("before");
            aa.addClass("before")
            .removeClass("active")
            .next("li")
            .addClass("active")
            .closest("body")
            .addClass("play");
        }

    }

    function minutePlay() {
        $("body").removeClass("play");
        var aa = $("ul.minutePlay li.active");

        if (aa.html() == undefined) {
            aa = $("ul.minutePlay li").eq(0);
            aa.addClass("before")
            .removeClass("active")
            .next("li")
            .addClass("active")
            .closest("body")
            .addClass("play");

        }
        else if (aa.is(":last-child")) {
            $("ul.minutePlay li").removeClass("before");
            aa.addClass("before").removeClass("active");
            aa = $("ul.minutePlay li").eq(0);
            aa.addClass("active")
            .closest("body")
            .addClass("play");
        }
        else {
            $("ul.minutePlay li").removeClass("before");
            aa.addClass("before")
            .removeClass("active")
            .next("li")
            .addClass("active")
            .closest("body")
            .addClass("play");
        }

    }
</script>
</body>
</html>